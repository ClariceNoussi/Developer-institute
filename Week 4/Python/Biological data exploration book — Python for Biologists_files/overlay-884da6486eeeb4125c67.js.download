(("undefined"!==typeof self?self:this).webpackChunkgumroad=("undefined"!==typeof self?self:this).webpackChunkgumroad||[]).push([[6372],{84237:(t,e,i)=>{var o,r;const n=i(33899);!function(){"use strict";o=[i(82681),i(5622),i(71818),i(35278),i(63514),i(77138),i(58721),i(88499),i(63024),i(48093),i(27705),i(84096)],void 0===(r=function({default:t},e,i,{default:o},r,{default:a},{default:s},{default:d},{default:u},{default:h},{default:c},{default:l}){t.initialize(),n.isLocalStorageAccessible()||$(".js-product-display").data("single-product-mode",!0),$(".js-product-display").data("single-product-mode")||e.attachTo(".js-bundle-button",{onMultiOverlay:!0}),i.attachTo(".js-login"),o.attachTo(document),r.attachTo(document),a.attachTo(document),s.attachTo(document),d.attachTo(document),u.attachTo(document),h.attachTo(document),c.attachTo(document),l.attachTo(document)}.apply(e,o))||(t.exports=r)}()},15834:(t,e,i)=>{"use strict";i.d(e,{w:()=>o});const o=(t,e="*")=>{window.parent.postMessage(JSON.stringify(t),e)}},35278:(t,e,i)=>{"use strict";i.r(e);var o=i(95040),r=i.n(o),n=i(15834),a=i(66799),s=i.n(a);e.default=r()((function(){this.defaultAttrs({bundleCartSelector:".js-bundle-cart",bundleToolTipSelector:".js-bundle-tool-tip",externalLinkSelector:"a:not(.js-preview-link):not(.js-creator-profile-tabs a)[href]",footerSelector:".js-footer",loginSelector:".js-login",productContainerSelector:".js-product-row",productDisplaySelector:".js-product-display",productListSelector:".js-bundled-product-list",productSelector:".js-product",changedMindButtonSelector:".changed_mind_button",bundleHeightSpacing:65,bundleWidthSpacing:15,bundleMenuWidth:85,bundleMenuHeight:50,footerHeight:120,minLoginModalWidth:360,productParams:{permalink:""}}),this.addTargetsToLinks=function(){this.select("externalLinkSelector").attr("target","_blank")},this.cancelCheckout=function(){this.attr.checkingOut=!1,$("body").removeClass("checking-out showing-bundle"),setTimeout((()=>{this.shrinkToBundleOpen()}),350)},this.clickListener=function(t){const e=$(t.target||t.srcElement),i=["buy-form-main","bundle-container","product-row","js-login"];if(!this.attr.checkingOut||e.hasClass("js-overlay-blocker")){for(let t of i)if(e.hasClass(t)||e.parents("."+t).length>0)return;this.attr.completedPurchase?this.minimize():this.shrinkToBundleOpen()}},this.completePurchase=function(t,e){this.attr.checkingOut=!1,this.attr.completedPurchase=!0},this.notifyParentPageOfPurchase=function(t,e){if(e.success){if(!this.overlayParentDomain)return;(0,n.w)({...e,post_message_name:"sale"},this.overlayParentDomain)}},this.getPersistentBundle=function(){this.trigger("uiNeedsToGetPersistentBundle"),setTimeout((()=>{this.productsInBundle().length>0&&this.shrinkToBundleOpen()}),100)},this.getProduct=function(t){this.attr.userGoogleAnalyticsClientId=t.googleAnalyticsClientId,this.attr.productParams={permalink:""};for(let e of u){const i=t[e];(!i||"string"!==typeof i&&"boolean"!==typeof i||"false"!==i.toString().toLowerCase())&&(this.attr.productParams[e]=i)}this.setDuration(),this.trigger(document,"uiNeedsAProduct",this.attr.productParams)},this.gotMessage=function(t){let e={};if(t.data)try{e=JSON.parse(t.data)}catch(i){}"overlayMethod"in e&&"string"===typeof e.overlayMethod&&e.overlayMethod in this&&this[e.overlayMethod](e.overlayArgs)},this.keyListener=function(t){27===t.keyCode&&(t.stopPropagation(),this.minimize())},this.handleGetProductFailure=function(t,e){this.sendMethodToParent({parentMethod:"redirect",parentArgs:e.url})},this.maximize=function(){this.refreshPreview(),$("body").removeClass("gumroad-minimized"),this.select("productContainerSelector").addClass("showing"),this.trigger("uiNeedsToShowProductCountInCircle"),this.sendMethodToParent({parentMethod:"maximizeIframe",parentArgs:{width:`${$("body").width()}px`,height:`${$("body").height()+this.attr.footerHeight}px`}})},this.minimize=function(t){(!this.attr.checkingOut||null!=t&&null!=t.minimizeDimensions)&&($("body").addClass("gumroad-minimized"),this.select("productContainerSelector").addClass("not-showing"),this.trigger("uiNeedsToPauseVideo"),setTimeout((()=>{this.sendMethodToParent({parentMethod:"minimizeIframe",parentArgs:t?.minimizeDimensions})}),300))},this.prepareProduct=function(t,e){this.removeProduct(),this.select("productDisplaySelector").html(e.html),this.select("productSelector").addClass("relative popped"),s().attachTo(this.attr.productContainerSelector,{incrementViewCountOnInit:!0,isMobile:void 0,isMultiBuyEnabled:!this.attr.singleProductMode,onUserProfile:!1,overlayEmail:this.attr.productParams.email,overlayOfferCode:this.attr.productParams.offerCodeName,overlayQuantity:this.attr.productParams.quantity,overlayPrice:this.attr.productParams.price,overlayVariant:this.attr.productParams.variant,overlayTier:this.attr.productParams.tier,overlayDuration:this.attr.productParams.duration,overlayRecommendedBy:this.attr.productParams.recommended_by,overlayUrlParams:this.attr.productParams.url_parameters,permalink:this.attr.productParams.permalink,userInfoToAdd:void 0,wantThis:this.attr.productParams.wanted,isOverlay:!0,userGoogleAnalyticsClientId:this.attr.userGoogleAnalyticsClientId}),this.showProduct()},this.productsInBundle=function(){const t=[];return this.select("productListSelector").find("li").each((function(e,i){t.push($(i).data("unique-permalink"))})),t},this.redirect=function(t,e){this.sendMethodToParent({parentMethod:"redirect",parentArgs:e.url})},this.refreshPreview=function(){this.trigger(document,"showPreview",void 0)},this.removeProduct=function(){s().teardownAll(),this.select("productDisplaySelector").empty()},this.sendMethodToParent=function(t){this.overlayParentDomain&&window.parent.postMessage(JSON.stringify(t),this.overlayParentDomain)},this.setOverlayParentDomain=function(t){this.overlayParentDomain=t,this.sendMethodToParent({parentMethod:"handshake"})},this.setDuration=function(){for(let e of d)if(this.attr.productParams[e]&&(t=this.attr.productParams.duration,!d.includes(t))){this.attr.productParams.duration=e;break}var t},this.showPaymentFormIfWanted=function(){this.attr.productParams.wanted&&this.trigger("uiShowOverlayCreditCardForm")},this.showProduct=function(){this.trigger("uiTriggerECommerceView"),this.select("footerSelector").toggle(!this.select("productContainerSelector").data("custom-web-branding"));const t=this.select("productSelector").data("is-published");this.attr.productParams.wanted&&t||this.maximize()},this.startCheckout=function(){"true"===$('meta[property="gr:paypal:pay_with_paypal_enabled"]').attr("value")&&this.trigger("uiNeedsBraintreeClientTokenFetched",{isOverlay:!0,isMultiBuyEnabled:!this.attr.singleProductMode}),this.attr.checkingOut=!0,$("body").addClass("showing-bundle checking-out"),setTimeout((()=>{this.shrinkToBundleOpen()}),350)},this.shrinkToBundleOpen=function(){let t;if(this.productsInBundle().length>0){const e=this.select("bundleToolTipSelector");t={minimizeDimensions:{width:`${e.outerWidth()+this.attr.bundleWidthSpacing}px`,height:`${e.outerHeight()+this.attr.bundleHeightSpacing}px`}}}this.minimize(t)},this.shrinkOverlay=function(t,e){this.sendMethodToParent({parentMethod:"minimizeIframe",parentArgs:{width:`${t}px`,height:`${e}px`}})},this.shrinkToBundleClose=function(){this.shrinkOverlay(this.attr.bundleMenuWidth,this.attr.bundleMenuHeight)},this.hideOrClosePaymentForm=function(t){t.preventDefault(),this.attr.productParams.wanted?this.shrinkToBundleOpen():this.trigger(document,"uiShowProductMain",void 0)},this.after("initialize",(function(){this.attr.singleProductMode=$(".js-product-display").data("single-product-mode"),$("body").addClass("gumroad-minimized"),window.addEventListener?window.addEventListener("message",(t=>{this.gotMessage(t)}),!1):"attachEvent"in window&&window.attachEvent&&window.attachEvent("onmessage",(t=>{this.gotMessage(t)}),!1),this.addTargetsToLinks(),this.trigger(document,"uiSetOverlayPageShareUrl",{url:this.select("productDisplaySelector").data("overlay-share-url")}),this.on(document,"dataGotAProduct",this.prepareProduct),this.on(document,"dataGetProductFailure",this.handleGetProductFailure),this.on(document,"uiBundledProductPaymentFailed",this.completePurchase),this.on(document,"uiBundledProductPaymentCompleted",this.completePurchase),this.on(document,"uiBundledProductPaymentCompleted",this.notifyParentPageOfPurchase),this.on(document,"dataPurchaseSuccessful",this.notifyParentPageOfPurchase),this.on("click",{changedMindButtonSelector:this.hideOrClosePaymentForm}),this.on(document,"uiCanShowPaymentForm",this.showPaymentFormIfWanted),this.on(document,"uiCannotShowPaymentForm",this.maximize),this.on(document,"uiNeedsToCancelBundleCheckout",this.cancelCheckout),this.on(document,"uiNeedsToStartBundleCheckout",this.startCheckout),this.on(document,"uiNeedsToRedirectOverlayFromReceipt",this.redirect),this.on(document,"uiNeedsToHideProductOverlay",this.shrinkToBundleOpen),this.on(document,"uiNeedsToShrinkToBundleClose",this.shrinkToBundleClose),this.on(document,"uiNeedsToShrinkToBundleOpen",this.shrinkToBundleOpen),this.on(document,"keydown",this.keyListener),this.on(document,"click",this.clickListener)}))}));const d=["monthly","quarterly","biannually","yearly"],u=[...d,"permalink","offerCodeName","locale","wanted","email","gift","recommended_by","quantity","price","variant","tier","duration","url_parameters","affiliate_id"]}},t=>{t.O(0,[8782],(()=>{return e=84237,t(t.s=e);var e}));t.O()}]);